<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fractal 语音智能助手</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            /* 渐变仅在中部，上下为白色 */
            min-height: 100vh;
            background: linear-gradient(to bottom, #fff 0%, #fff 18%, #e3c6f7 30%, #a2b6e9 70%, #fff 82%, #fff 100%);
        }
        .header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            padding: 36px 60px 0 60px;
        }
        .logo-title {
            display: flex;
            align-items: center;
        }
        .logo-big {
            width: 100px;
            height: 100px;
            margin-right: 18px;
        }
        .main-title {
            font-family: 'Orbitron', Arial, sans-serif;
            font-size: 3.2rem;
            color: #2d1ed6;
            font-weight: bold;
            font-style: italic;
            letter-spacing: 4px;
            margin-bottom: 0;
        }
        .lang {
            font-family: 'Orbitron', Arial, sans-serif;
            font-size: 1.3rem;
            color: #222;
            font-style: italic;
            margin-top: 10px;
            cursor: pointer;
            transition: color 0.2s;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .lang:hover {
            color: #4bb6e6;
            background: rgba(75, 182, 230, 0.1);
        }
        .subtitle {
            text-align: center;
            font-size: 1.35rem;
            margin-top: 18px;
            color: #222;
            letter-spacing: 2px;
            font-weight: bold;
        }
        .main-content {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 60px;
            min-height: 420px;
        }
        .left-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-right: 60px;
            flex: 0 0 420px;
            min-height: 600px;
        }
        .enter-btns-diagonal {
            display: flex;
            flex-direction: row;
            margin-top: 120px;
            box-shadow: 0 4px 24px #b6b6e6;
        }
        .diagonal-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 140px;
            width: 240px;
            font-size: 2rem;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            font-weight: bold;
            border-radius: 6px;
            margin: 0;
            position: relative;
            box-sizing: border-box;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            transform: translateY(0);
        }
        .diagonal-btn:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        .diagonal-btn:active {
            transform: translateY(-4px);
            transition: all 0.1s ease;
        }
        .web-diagonal {
            background: #393a5a;
            color: #fff;
            border-radius: 6px;
            box-shadow: 2px 0 8px #b6b6e6;
            z-index: 2;
        }
        .web-diagonal:hover {
            background: #4a4b6a;
            box-shadow: 0 8px 32px rgba(57, 58, 90, 0.3);
        }
        .app-diagonal {
            background: #e6e8f7;
            color: #4bb6e6;
            border-radius: 6px;
            margin-left: 8px;
            z-index: 1;
        }
        .app-diagonal:hover {
            background: #f0f2ff;
            color: #3aa5d6;
            box-shadow: 0 8px 32px rgba(75, 182, 230, 0.3);
        }
        .web-diagonal i {
            font-size: 2.8rem;
            margin-bottom: 12px;
            transition: transform 0.3s ease;
        }
        .web-diagonal:hover i {
            transform: scale(1.1);
        }
        .app-diagonal i {
            font-size: 2.2rem;
            margin-bottom: 12px;
            transition: transform 0.3s ease;
        }
        .app-diagonal:hover i {
            transform: scale(1.1);
        }
        .web-text {
            font-size: 1.6rem;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            font-weight: bold;
            letter-spacing: 2px;
            transition: transform 0.3s ease;
        }
        .web-diagonal:hover .web-text {
            transform: translateY(-2px);
        }
        .app-text {
            font-size: 1.6rem;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            font-weight: bold;
            color: #4bb6e6;
            letter-spacing: 2px;
            transition: transform 0.3s ease;
        }
        .app-diagonal:hover .app-text {
            transform: translateY(-2px);
        }
        .right-panel {
            background: rgba(255,255,255,0.72);
            border-radius: 22px;
            box-shadow: 0 8px 32px 0 rgba(120,120,180,0.18), 0 1.5px 16px 0 #b6b6e6;
            border: 2.5px solid #e3d6f7;
            width: 570px;
            padding: 54px 38px 38px 38px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px);
        }
        .right-panel::before {
            content: '';
            position: absolute;
            left: 60px;
            top: -120px;
            width: 520px;
            height: 900px;
            background: linear-gradient(110deg, #b6b6e6 0%, #e6a6f7 60%, #a2b6e9 100%);
            opacity: 0.32;
            transform: skewX(-18deg);
            z-index: 1;
        }
        .feature-list {
            position: relative;
            z-index: 2;
        }
        .feature-item {
            background: #6ec6fa;
            border-radius: 14px;
            margin-bottom: 38px;
            padding: 28px 38px 22px 90px;
            position: relative;
            box-shadow: 0 2px 18px #b6b6e6;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .feature-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(110, 198, 250, 0.3);
        }
        .feature-item:last-child {
            margin-bottom: 0;
        }
        .feature-icon {
            position: absolute;
            left: 38px;
            top: 32px;
            font-size: 2.3rem;
        }
        .feature-title {
            font-family: 'Orbitron', Arial, sans-serif;
            font-size: 1.35rem;
            font-weight: bold;
            color: #222;
        }
        .feature-desc {
            font-size: 1.05rem;
            color: #222;
            margin-top: 4px;
            margin-left: 2px;
        }
        .dots {
            display: flex;
            justify-content: center;
            margin-top: 22px;
            z-index: 2;
            position: relative;
        }
        .dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #e6e8f7;
            margin: 0 7px;
            border: 2px solid #b6b6e6;
        }
        .dot.active {
            background: #6ec6fa;
            border-color: #6ec6fa;
        }
        .footer {
            background: #fff;
            margin-top: 60px;
            padding: 40px 0 30px 0;
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            box-shadow: 0 -2px 16px #b6b6e6;
        }
        .footer-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .footer-logo svg {
            width: 70px;
            height: 70px;
        }
        .footer-icons {
            margin-top: 16px;
        }
        .footer-icons i {
            font-size: 1.5rem;
            margin: 0 10px;
            color: #222;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .footer-icons i:hover {
            color: #e6a6f7;
        }
        .footer-block {
            width: 140px;
            text-align: center;
        }
        .footer-title {
            font-size: 1.18rem;
            font-weight: bold;
            margin-bottom: 14px;
        }
        .footer-placeholder {
            width: 100%;
            height: 90px;
            background: #ccc;
            border-radius: 8px;
            opacity: 0.4;
        }
        
        
        @media (max-width: 1100px) {
            .main-content {
                flex-direction: column;
                align-items: center;
            }
            .left-panel {
                margin-right: 0;
                margin-bottom: 30px;
            }
            .right-panel {
                width: 95vw;
                min-width: 0;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="logo-title">
            <svg class="logo-big" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="circleGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#b6a6f7"/>
                        <stop offset="50%" stop-color="#6ec6fa"/>
                        <stop offset="100%" stop-color="#8be6b6"/>
                    </linearGradient>
                </defs>
                <path d="M 180 100 A 80 80 0 1 1 20 100" fill="none" stroke="url(#circleGradient)" stroke-width="16" stroke-linecap="round"/>
                <rect x="92" y="18" width="16" height="18" rx="3" fill="#fff"/>
                <text x="100" y="120" text-anchor="middle" font-family="Orbitron, Arial, sans-serif" font-size="32" font-weight="bold" fill="#111" font-style="italic" letter-spacing="4">FRACTAL</text>
            </svg>
            <span class="main-title">Fractal</span>
        </div>
        <span class="lang" id="langToggle">English</span>
    </div>
    <div class="subtitle">一款人性化的智能语音助手</div>
    <div class="main-content">
        <div class="left-panel">
            <div class="enter-btns enter-btns-diagonal">
                <div class="diagonal-btn web-diagonal" id="webEntryBtn">
                    <i class="fa-brands fa-windows"></i>
                    <span class="web-text">进入网页版</span>
                </div>
                <div class="diagonal-btn app-diagonal">
                    <i class="fa-solid fa-mobile"></i>
                    <span class="app-text">获取APP</span>
                </div>
            </div>
        </div>
        <div class="right-panel">
            <div class="feature-list">
                                 <div class="feature-item" id="voiceAssistant">
                     <span class="feature-icon"><i class="fa-solid fa-comments"></i></span>
                     <div class="feature-title">智能化语音助手</div>
                     <div class="feature-desc">实时对话</div>
                 </div>
                                 <div class="feature-item" id="voiceSettings">
                     <span class="feature-icon"><i class="fa-solid fa-music"></i></span>
                     <div class="feature-title">自定义音色配置</div>
                     <div class="feature-desc">自定义音色</div>
                 </div>
                                 <div class="feature-item" id="mcpSubscription">
                     <span class="feature-icon"><i class="fa-solid fa-briefcase"></i></span>
                     <div class="feature-title">MCP工具应用</div>
                     <div class="feature-desc">便捷办公</div>
                 </div>
            </div>
            <div class="dots">
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-logo">
            <svg width="70" height="70" viewBox="0 0 200 200" style="margin-bottom:2px;" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="circleGradient2" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#b6a6f7"/>
                        <stop offset="50%" stop-color="#6ec6fa"/>
                        <stop offset="100%" stop-color="#8be6b6"/>
                    </linearGradient>
                </defs>
                <path d="M 180 100 A 80 80 0 1 1 20 100" fill="none" stroke="url(#circleGradient2)" stroke-width="16" stroke-linecap="round"/>
                <rect x="92" y="18" width="16" height="18" rx="3" fill="#fff"/>
                <text x="100" y="120" text-anchor="middle" font-family="Orbitron, Arial, sans-serif" font-size="28" font-weight="bold" fill="#111" font-style="italic" letter-spacing="5">FRACTAL</text>
            </svg>
                         <div class="footer-icons">
                 <i class="fa-regular fa-envelope" id="emailIcon"></i>
                 <i class="fa-solid fa-comments" id="chatIcon"></i>
                 <i class="fa-brands fa-github" id="githubIcon"></i>
             </div>
        </div>
        <div class="footer-block">
            <div class="footer-title">可连接设备</div>
            <div class="footer-placeholder"></div>
        </div>
        <div class="footer-block">
            <div class="footer-title">关于我们</div>
            <div class="footer-placeholder"></div>
        </div>
    </div>
    <script>
        // 语言切换功能
        const langToggle = document.getElementById('langToggle');
        const subtitle = document.querySelector('.subtitle');
        const webText = document.querySelector('.web-text');
        const appText = document.querySelector('.app-text');
        const featureTitles = document.querySelectorAll('.feature-title');
        const featureDescs = document.querySelectorAll('.feature-desc');
        const footerTitles = document.querySelectorAll('.footer-title');
        
                 // 语言内容配置
         const translations = {
             zh: {
                 langToggle: 'English',
                 subtitle: '一款人性化的智能语音助手',
                 webText: '进入网页版',
                 appText: '获取APP',
                 featureTitles: ['智能化语音助手', '自定义音色配置', 'MCP工具应用'],
                 featureDescs: ['实时对话', '自定义音色', '便捷办公'],
                 footerTitles: ['可连接设备', '关于我们']
             },
             en: {
                 langToggle: '中文',
                 subtitle: 'A Humanized Intelligent Voice Assistant',
                 webText: 'Web Version',
                 appText: 'Get APP',
                 featureTitles: ['Intelligent Voice Assistant', 'Custom Voice Configuration', 'MCP Tool Applications'],
                 featureDescs: ['Real-time Dialogue', 'Custom Voice', 'Convenient Office'],
                 footerTitles: ['Connectable Devices', 'About Us']
             }
         };
        
        let currentLang = 'zh';
        
        // 切换语言函数
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            const lang = translations[currentLang];
            
            // 更新语言切换按钮
            langToggle.textContent = lang.langToggle;
            
            // 更新副标题
            subtitle.textContent = lang.subtitle;
            
            // 更新按钮文本
            webText.textContent = lang.webText;
            appText.textContent = lang.appText;
            
            // 更新功能标题和描述
            featureTitles.forEach((title, index) => {
                title.textContent = lang.featureTitles[index];
            });
            
            featureDescs.forEach((desc, index) => {
                desc.textContent = lang.featureDescs[index];
            });
            
            // 更新页脚标题
            footerTitles.forEach((title, index) => {
                title.textContent = lang.footerTitles[index];
            });
        }
        
        // 添加点击事件
        if (langToggle) {
            langToggle.onclick = toggleLanguage;
            langToggle.style.cursor = 'pointer';
        }
        
        // 跳转到登录页
        const webEntryBtn = document.getElementById('webEntryBtn');
        if (webEntryBtn) {
            webEntryBtn.onclick = function() {
                window.location.href = 'login.html';
            };
        }
        
        // 页脚图标跳转功能
        const emailIcon = document.getElementById('emailIcon');
        const chatIcon = document.getElementById('chatIcon');
        const githubIcon = document.getElementById('githubIcon');
        
        if (emailIcon) {
            emailIcon.onclick = function() {
                alert('邮件功能正在开发中...');
            };
        }
        
        if (chatIcon) {
            chatIcon.onclick = function() {
                alert('聊天功能正在开发中...');
            };
        }
        
                 if (githubIcon) {
             githubIcon.onclick = function() {
                 alert('GitHub功能正在开发中...');
             };
         }
         
         // 功能模块跳转功能
         const voiceAssistant = document.getElementById('voiceAssistant');
         const voiceSettings = document.getElementById('voiceSettings');
         const mcpSubscription = document.getElementById('mcpSubscription');
         
         // 用户状态检查函数
         function checkUserStatus() {
             // 检查多种可能的登录状态标识
             const userToken = localStorage.getItem('userToken');
             const sessionToken = sessionStorage.getItem('userToken');
             const isLoggedIn = localStorage.getItem('isLoggedIn');
             const isRegistered = localStorage.getItem('isRegistered');
             const userId = localStorage.getItem('userId');
             const userSession = sessionStorage.getItem('userSession');
             const authToken = localStorage.getItem('authToken');
             const loginStatus = localStorage.getItem('loginStatus');
             const userInfo = localStorage.getItem('userInfo');
             
             // 检查URL参数中的登录状态
             const urlParams = new URLSearchParams(window.location.search);
             const urlToken = urlParams.get('token');
             const urlUserId = urlParams.get('userId');
             const urlLoginStatus = urlParams.get('loginStatus');
             
             // 如果有URL参数，更新本地存储
             if (urlToken) {
                 localStorage.setItem('userToken', urlToken);
                 sessionStorage.setItem('userToken', urlToken);
             }
             if (urlUserId) {
                 localStorage.setItem('userId', urlUserId);
             }
             if (urlLoginStatus) {
                 localStorage.setItem('loginStatus', urlLoginStatus);
             }
             
             // 检查cookie中的登录状态
             const cookies = document.cookie.split(';');
             let cookieToken = null;
             let cookieUserId = null;
             
             cookies.forEach(cookie => {
                 const [name, value] = cookie.trim().split('=');
                 if (name === 'userToken' || name === 'authToken') {
                     cookieToken = value;
                 }
                 if (name === 'userId') {
                     cookieUserId = value;
                 }
             });
             
             // 如果有cookie中的token，更新本地存储
             if (cookieToken) {
                 localStorage.setItem('userToken', cookieToken);
                 sessionStorage.setItem('userToken', cookieToken);
             }
             if (cookieUserId) {
                 localStorage.setItem('userId', cookieUserId);
             }
             
             // 检查是否有任何登录标识
             const hasLoginToken = userToken || sessionToken || authToken || cookieToken;
             const hasUserId = userId || cookieUserId || urlUserId;
             const hasLoginStatus = isLoggedIn === 'true' || loginStatus === 'true' || urlLoginStatus === 'true';
             const hasUserSession = userSession || userInfo;
             
             // 如果没有任何登录标识，但用户希望默认登录，则设置默认登录状态
             if (!hasLoginToken && !hasUserId && !hasLoginStatus && !hasUserSession) {
                 // 设置默认登录状态
                 localStorage.setItem('userToken', 'default-user-token');
                 localStorage.setItem('isLoggedIn', 'true');
                 localStorage.setItem('isRegistered', 'true');
                 localStorage.setItem('userId', 'default-user-id');
                 console.log('检测到默认登录状态，已设置登录标识');
                 return 'loggedIn';
             }
             
             if (hasLoginToken || hasUserId || hasLoginStatus || hasUserSession) {
                 // 检查是否已注册
                 const isUserRegistered = isRegistered === 'true' || hasUserId || hasLoginToken;
                 if (isUserRegistered) {
                     return 'loggedIn';
                 } else {
                     return 'notRegistered';
                 }
             } else {
                 return 'notLoggedIn';
             }
         }
         
         // 跳转函数
         function navigateToPage(page) {
             const userStatus = checkUserStatus();
             console.log('当前用户状态:', userStatus); // 调试信息
             
             switch(userStatus) {
                 case 'notLoggedIn':
                     console.log('用户未登录，跳转到登录页');
                     window.location.href = 'login.html';
                     break;
                 case 'notRegistered':
                     console.log('用户未注册，跳转到注册页');
                     window.location.href = 'register.html';
                     break;
                 case 'loggedIn':
                     console.log('✅ 用户已登录，跳转到目标页面:', page);
                     // 添加跳转前的确认提示
                     if (confirm('确认跳转到 ' + page + ' 页面吗？')) {
                         window.location.href = page;
                     }
                     break;
                 default:
                     console.log('未知状态，默认跳转到登录页');
                     window.location.href = 'login.html';
             }
         }
         
         // 自动检测登录状态的函数
         function autoDetectLoginStatus() {
             // 检查页面加载时的登录状态
             const initialStatus = checkUserStatus();
             console.log('页面加载时检测到的登录状态:', initialStatus);
             
             // 如果检测到已登录状态，显示登录成功提示
             if (initialStatus === 'loggedIn') {
                 console.log('✅ 用户已登录，可以正常使用所有功能');
                 // 可以在这里添加视觉提示，比如显示用户名或登录状态
             }
             
             // 监听storage事件，当其他页面更新登录状态时自动更新
             window.addEventListener('storage', function(e) {
                 if (e.key === 'userToken' || e.key === 'isLoggedIn' || e.key === 'userId') {
                     console.log('检测到登录状态变化:', e.key, e.newValue);
                     const newStatus = checkUserStatus();
                     console.log('更新后的登录状态:', newStatus);
                 }
             });
             
             // 定期检查登录状态（每30秒检查一次）
             setInterval(() => {
                 const currentStatus = checkUserStatus();
                 console.log('定期检查登录状态:', currentStatus);
             }, 30000);
         }
         
         // 添加点击事件
         if (voiceAssistant) {
             voiceAssistant.onclick = function() {
                 navigateToPage('voice-simulator.html');
             };
         }
         
         if (voiceSettings) {
             voiceSettings.onclick = function() {
                 navigateToPage('voice-settings.html');
             };
         }
         
         if (mcpSubscription) {
             mcpSubscription.onclick = function() {
                 navigateToPage('mcp-subscription.html');
             };
         }
         
         // 手动设置登录状态的函数（用于测试）
         function setLoginStatus(status) {
             switch(status) {
                 case 'loggedIn':
                     localStorage.setItem('userToken', 'test-token-123');
                     localStorage.setItem('isLoggedIn', 'true');
                     localStorage.setItem('isRegistered', 'true');
                     localStorage.setItem('userId', 'user123');
                     console.log('已设置为已登录状态');
                     break;
                 case 'notRegistered':
                     localStorage.setItem('userToken', 'test-token-123');
                     localStorage.setItem('isLoggedIn', 'true');
                     localStorage.removeItem('isRegistered');
                     console.log('已设置为已登录但未注册状态');
                     break;
                 case 'notLoggedIn':
                     localStorage.clear();
                     sessionStorage.clear();
                     console.log('已设置为未登录状态');
                     break;
             }
         }
         
         // 页面加载时自动检测登录状态
         autoDetectLoginStatus();
         
         // 在控制台中可以调用以下命令来测试：
         // setLoginStatus('loggedIn') - 设置为已登录
         // setLoginStatus('notRegistered') - 设置为已登录但未注册
         // setLoginStatus('notLoggedIn') - 设置为未登录
         // checkUserStatus() - 检查当前登录状态
         
     </script>
</body>
</html>